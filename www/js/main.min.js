'use strict';

(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=function(a,b){return function(){return a.apply(b,arguments)}},u={}.hasOwnProperty,v=function(a,b){function c(){this.constructor=a}for(var d in b)u.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=function(a){function b(){return this.update=t(this.update,this),this.play=t(this.play,this),this.finishedLoading=t(this.finishedLoading,this),this.initialize=t(this.initialize,this),l=b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.context=null,b.prototype.bufferLoader=null,b.prototype.analyser=null,b.prototype.url="/static/sound/track.mp3",b.prototype.source=null,b.prototype.initialize=function(){return this.context=new AudioContext,this.analyser=this.context.createAnalyser(),this.analyser.fftSize=1024,this.bufferLoader=new BufferLoader(this.context,[this.url],this.finishedLoading),this.bufferLoader.load()},b.prototype.finishedLoading=function(a){return this.source=this.context.createBufferSource(),this.source.buffer=a[0],this.source.connect(this.analyser),this.analyser.connect(this.context.destination),this.trigger("loaded"),null},b.prototype.play=function(){return this.source.start(0)},b.prototype.update=function(){var a;if(this.analyser&&this.analyser.context)return a=new Uint8Array(this.analyser.frequencyBinCount),this.analyser.getByteFrequencyData(a),{time:this.context.currentTime,freq:a}},b}(Backbone.View),e=function(a){function b(){return this.shakeMou=t(this.shakeMou,this),this.stopMou=t(this.stopMou,this),this.scaleMo=t(this.scaleMo,this),this.update=t(this.update,this),this.initialize=t(this.initialize,this),this.getXXYY=t(this.getXXYY,this),m=b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.mou=null,b.prototype.hat=null,b.prototype.g=null,b.prototype.xx=0,b.prototype.yy=0,b.prototype.getXXYY=function(){return this.xx=$(window).innerWidth(),this.yy=$(window).innerHeight(),null},b.prototype.initialize=function(){var a=this;return this.getXXYY(),this.g=Snap(),Snap.load("static/images/mou.svg",function(b){var c,d;return a.mou=b.select("#mou").attr({fill:"#000"}),a.g.add(a.mou),c=a.xx/2-a.mou.getBBox().width/2,d=a.yy/2-a.mou.getBBox().height/2,a.mou.attr({transform:"t"+[c,d]})})},b.prototype.update=function(a){switch(!0){case a.time>=2&&a.time<6.5:return this.shakeMou();case a.time>=7.8&&a.time<13.5:return this.shakeMou();default:return this.stopMou()}},b.prototype.scaleMo=function(){var a,b,c;if(!(this.mou.inAnim().length>0))return this.mou.stop(),b=(this.xx-this.mou.getBBox().width)/2,c=(this.yy-this.mou.getBBox().height)/2,a="s"+[100,100],setTimeout(function(){return $("body").css("background-color","#000")},400),this.mou.animate({transform:a},700)},b.prototype.stopMou=function(){var a,b,c;return this.mou.stop(),b=(this.xx-this.mou.getBBox().width)/2,c=(this.yy-this.mou.getBBox().height)/2,a="r"+[0,b+this.mou.getBBox().width,c]+", t"+[b,c],this.mou.animate({transform:a},75)},b.prototype.shakeMou=function(){var a,b,c,d=this;b=(this.xx-this.mou.getBBox().width)/2,c=(this.yy-this.mou.getBBox().height)/2,this.mou.inAnim().length>0||(a="r"+[10,b+this.mou.getBBox().width,c]+", t"+[b,c],this.mou.animate({transform:a},75,null,function(){return a="r"+[-10,b,c]+", t"+[b,c],d.mou.animate({transform:a},100,null)}))},b}(Backbone.View),c=function(a){function c(){return this.animateOut=t(this.animateOut,this),this.animateIn=t(this.animateIn,this),this.initialize=t(this.initialize,this),n=c.__super__.constructor.apply(this,arguments)}return v(c,a),c.prototype.className="circles",c.prototype.circles=null,c.prototype.animatedIn=!1,c.prototype.animatedOut=!1,c.prototype.initialize=function(){var a,c,d,e,f,g;for(c=["#27E7FF","#33B32A","#FF1100","#FCFFFF","#27E7FF","#000"],this.circles=[],g=[],d=e=0,f=c.length;f>e;d=e+=1)a=new b(c[d]),this.circles.push(a),g.push(this.$el.append(a.$el));return g},c.prototype.animateIn=function(){var a,b,c;for(this.$el.css("display","block"),this.animatedIn=!0,a=b=0,c=this.circles.length;c>=0?c>b:b>c;a=c>=0?++b:--b)this.circles[a].animateIn(500+350*a);return null},c.prototype.animateOut=function(){var a,b,c;for(this.$el.css("z-index","999"),this.animatedOut=!0,this.circles=this.circles.reverse(),a=b=0,c=this.circles.length;c>=0?c>b:b>c;a=c>=0?++b:--b)this.circles[a].animateOut(500+350*a);return null},c}(Backbone.View),j=function(a){function b(){return this.onResize=t(this.onResize,this),this.onToggleShaders=t(this.onToggleShaders,this),this.startParams=t(this.startParams,this),this.onParamsChange=t(this.onParamsChange,this),this.setupGrito=t(this.setupGrito,this),this.setupViz=t(this.setupViz,this),this.render=t(this.render,this),this.update=t(this.update,this),this.updateLightDrama=t(this.updateLightDrama,this),this.changeScale=t(this.changeScale,this),this.changeCamera=t(this.changeCamera,this),this.pad=t(this.pad,this),this.getGif=t(this.getGif,this),this.initialize=t(this.initialize,this),o=b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.className="canvasContainer",b.prototype.scene=null,b.prototype.camera=null,b.prototype.particles=1e3,b.prototype.mouseX=0,b.prototype.mouseY=0,b.prototype.p=null,b.prototype.shaderTime=0,b.prototype.object=null,b.prototype.secs=null,b.prototype.drums=null,b.prototype.drama=null,b.prototype.picked=null,b.prototype.pickedDrums=null,b.prototype.pickedDrama=null,b.prototype.colours=null,b.prototype.composer=null,b.prototype.shaderTime=0,b.prototype.badTVParams=null,b.prototype.badTVPass=null,b.prototype.staticParams=null,b.prototype.staticPass=null,b.prototype.rgbParams=null,b.prototype.rgbPass=null,b.prototype.filmParams=null,b.prototype.filmPass=null,b.prototype.renderPass=null,b.prototype.copyPass=null,b.prototype.pnoise=null,b.prototype.globalParams=null,b.prototype.videoTexture=null,b.prototype.videoMaterial=null,b.prototype.isGrito=!1,b.prototype.initialize=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;for(this.picked=this.pickedDrama=this.pickedDrums=[],this.drums=[12.998,13.537,14.479,14.99,15.984,16.56,17.591,18.106,19.06,19.655,20.682,21.208,22.209,22.799,23.846,24.392,25.355,25.92,26.807,27.383,28.36,28.941,30.025,30.55,31.595,32.131,33.118,33.608,34.606,35.182,36.234,36.735,37.75,38.375,39.294,39.873,40.799,41.366,42.366,42.887,43.968,44.54,45.578,46.123,52.068,52.906,53.96,54.506,55.567],this.secs=[13.008,15.812,18.78,21.977,24.875,28.319,31.437,34.43,37.717,40.506,43.453,46.436],this.drama=[37.869,38.203,38.593,38.96,39.318,39.74,40.114,40.876,41.27,41.663,42.083,42.471,42.854,43.235,43.983,44.394,44.802,45.176,45.575,45.966,46.39],c=g=0,k=this.secs.length;k>g;c=g+=1)this.secs[c]=this.secs[c].toFixed(1);for(c=h=0,l=this.drums.length;l>h;c=h+=1)this.drums[c]=this.drums[c].toFixed(1);for(c=i=0,m=this.drama.length;m>i;c=i+=1)this.drama[c]=this.drama[c].toFixed(1);for(this.colours=[2615295,3388202,16716032,16580607,2615295],this.renderer=new THREE.WebGLRenderer,this.renderer.setClearColor(0,1),this.renderer.setSize(window.innerWidth,window.innerHeight),this.el.appendChild(this.renderer.domElement),this.composer=new THREE.EffectComposer(this.renderer),this.copyPass=new THREE.ShaderPass(THREE.CopyShader),this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,2e3),this.scene=new THREE.Scene,this.object=new THREE.Object3D,this.object.name="cubes",b=new THREE.SphereGeometry(1,4,4),c=j=0;300>j;c=++j)d=new THREE.MeshPhongMaterial({map:THREE.ImageUtils.loadTexture(this.getGif()),shading:THREE.FlatShading}),e=new THREE.Mesh(b,d),e.position.set(Math.random()-.7,Math.random()-.5,Math.random()-.1).normalize(),e.position.multiplyScalar(800*Math.random()),e.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),a=50*Math.random(),e.scale.x=e.scale.y=e.scale.z=a,e.originalScale=a,this.object.add(e);return this.scene.add(new THREE.AmbientLight(4473925)),this.videoMaterial=new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture("static/images/grito.jpg")}),f=new THREE.PlaneGeometry(window.innerWidth,window.innerHeight,1,1),this.plane=new THREE.Mesh(f,this.videoMaterial),this.plane.name="plane",this.plane.z=0,this.plane.scale.x=this.plane.scale.y=1.45,this.renderPass=new THREE.RenderPass(this.scene,this.camera),this.badTVPass=new THREE.ShaderPass(THREE.BadTVShader),this.rgbPass=new THREE.ShaderPass(THREE.RGBShiftShader),this.filmPass=new THREE.ShaderPass(THREE.FilmShader),this.staticPass=new THREE.ShaderPass(THREE.StaticShader),this.setupViz(),this.onResize(),window.addEventListener("resize",this.onResize,!1),null},b.prototype.getGif=function(){return"static/images/gifs/gif_"+this.pad(Math.round(49*Math.random()))+".gif"},b.prototype.pad=function(a,b){var c;return null==b&&(b=3),c="000000000"+a,c.substr(c.length-b)},b.prototype.changeCamera=function(a){return a=a.toFixed(1),_.where(this.secs,a).length>0&&0===_.where(this.picked,a).length&&(this.picked.push(a),this.mouseX=(window.innerWidth/2-Math.random()*window.innerWidth/2)/1.5,this.mouseY=(window.innerHeight/2-Math.random()*window.innerHeight/2)/1.5),null},b.prototype.changeScale=function(a){var b,c,d,e,f,g,h,i,j;if(b=.25,a=a.toFixed(1),_.where(this.drums,a).length>0&&0===_.where(this.pickedDrums,a).length)for(this.pickedDrums.push(a),i=this.object.children,e=0,g=i.length;g>e;e++)c=i[e],c.target=c.originalScale+15,c.animating=!0;for(j=this.object.children,f=0,h=j.length;h>f;f++)c=j[f],c.animating?Math.floor(c.scale.x)<Math.floor(c.target)?(d=c.scale.x,d+=(c.target-c.scale.x)*b,c.scale.x=c.scale.y=c.scale.z=d):c.animating=!1:(d=c.scale.x,d+=(c.originalScale-d)*b,c.scale.x=c.scale.y=c.scale.z=d);return null},b.prototype.updateLightDrama=function(a){var b;return a=a.toFixed(1),_.where(this.drama,a).length>0&&0===_.where(this.pickedDrama,a).length?(this.pickedDrama.push(a),b=Math.floor(Math.random()*(this.colours.length-1)),this.light2.color.setHex(this.colours[b])):void 0},b.prototype.update=function(a){return this.changeCamera(a.time),this.changeScale(a.time),a.time>37.5&&a.time<47?(this.light2||(this.light2=new THREE.AmbientLight(16711680),this.light2.position.set(1,1,1),this.scene.add(this.light2)),this.updateLightDrama(a.time)):this.light2&&(this.scene.remove(this.light2),this.light2=null),this.render(),null},b.prototype.render=function(){return this.isGrito?(this.camera.position.x=0,this.camera.position.y=0,this.shaderTime+=.1,this.badTVPass.uniforms.time.value=this.shaderTime,this.filmPass.uniforms.time.value=this.shaderTime,this.staticPass.uniforms.time.value=this.shaderTime,this.composer.render(.1)):(this.camera.position.x+=.05*(this.mouseX-this.camera.position.x),this.camera.position.y+=.05*(-this.mouseY-this.camera.position.y),this.renderer.render(this.scene,this.camera)),null},b.prototype.setupViz=function(){return this.scene.fog=new THREE.FogExp2(0,5e-4),this.camera.fov=75,this.camera.far=2e3,this.camera.near=1,this.camera.position.z=700,this.camera.aspect=window.innerWidth/window.innerHeight,this.scene.remove(this.plane),this.scene.remove(this.object),this.scene.add(this.object),this.startParams(!1),this.onToggleShaders(),this.onParamsChange(),null},b.prototype.setupGrito=function(){return this.scene.fog=null,this.camera.fov=55,this.camera.far=3e3,this.camera.near=20,this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=1e3,this.scene.remove(this.plane),this.scene.remove(this.object),this.scene.add(this.plane),this.startParams(!0),this.onToggleShaders(),this.onParamsChange(),null},b.prototype.onParamsChange=function(){return this.badTVPass.uniforms.distortion.value=this.badTVParams.distortion,this.badTVPass.uniforms.distortion2.value=this.badTVParams.distortion2,this.badTVPass.uniforms.speed.value=this.badTVParams.speed,this.badTVPass.uniforms.rollSpeed.value=this.badTVParams.rollSpeed,this.staticPass.uniforms.amount.value=this.staticParams.amount,this.staticPass.uniforms.size.value=this.staticParams.size2,this.rgbPass.uniforms.angle.value=this.rgbParams.angle*Math.PI,this.rgbPass.uniforms.amount.value=this.rgbParams.amount,this.filmPass.uniforms.sCount.value=this.filmParams.count,this.filmPass.uniforms.sIntensity.value=this.filmParams.sIntensity,this.filmPass.uniforms.nIntensity.value=this.filmParams.nIntensity,null},b.prototype.startParams=function(a){return null==a&&(a=!0),a?(this.filmPass.uniforms.grayscale.value=0,this.badTVParams={show:!0,distortion:3.060059035103768,distortion2:8.147361182980239,speed:.06159879360347986,rollSpeed:0},this.rgbParams={show:!0,amount:.014869250056799501,angle:1.114169194828719},this.staticParams={show:!0,amount:.006870601838454605,size2:4},this.filmParams={show:!0,count:800,sIntensity:.9,nIntensity:.4}):(this.filmPass.uniforms.grayscale.value=0,this.badTVParams={show:!0,distortion:.060059035103768,distortion2:1.147361182980239,speed:.00159879360347986,rollSpeed:0},this.rgbParams={show:!0,amount:2.50056799501e-7,angle:69194828719e-15},this.staticParams={show:!0,amount:.006870601838454605,size2:4},this.filmParams={show:!0,count:800,sIntensity:.2,nIntensity:.1}),null},b.prototype.onToggleShaders=function(a){return null==a&&(a=!0),this.composer=new THREE.EffectComposer(this.renderer),this.composer.addPass(this.renderPass),a&&(this.filmParams.show&&this.composer.addPass(this.filmPass),this.badTVParams.show&&this.composer.addPass(this.badTVPass),this.rgbParams.show&&this.composer.addPass(this.rgbPass),this.staticParams.show&&this.composer.addPass(this.staticPass)),this.composer.addPass(this.copyPass),this.copyPass.renderToScreen=!0,null},b.prototype.onResize=function(){return this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),null},b}(Backbone.View),b=function(a){function b(a){this.colour=null!=a?a:"black",this.animateOut=t(this.animateOut,this),this.animateIn=t(this.animateIn,this),this.reset=t(this.reset,this),b.__super__.constructor.call(this),this.reset()}return v(b,a),b.prototype.className="circle",b.prototype.reset=function(){var a;return this.$el.removeClass(),a=1.5*Math.max($(window).innerWidth(),$(window).innerHeight()),this.$el.css({width:a,height:a,backgroundColor:this.colour,left:($(window).innerWidth()-a)/2,top:($(window).innerHeight()-a)/2})},b.prototype.animateIn=function(a){var b=this;return this.reset(),this.$el.addClass("circle0"),setTimeout(function(){return b.$el.addClass("animateCircle"),b.$el.css({transform:"scale(1)"})},a)},b.prototype.animateOut=function(a){var b=this;return this.reset(),this.$el.addClass("circle1"),setTimeout(function(){return b.$el.addClass("animateCircle"),b.$el.css({transform:"scale(0)"})},a)},b}(Backbone.View),g=function(){function a(a){this.move=t(this.move,this),this.rand=t(this.rand,this),this.draw=t(this.draw,this),this.dx=a._dx,this.dy=a._dy,this.x=a._x,this.y=a._y,this.r=a._r,this.canvas=a._canvas,this.w=a._w,this.h=a._h}return a.prototype.x=0,a.prototype.y=0,a.prototype.r=0,a.prototype.dx=0,a.prototype.dy=0,a.prototype.canvas=null,a.prototype.w=0,a.prototype.h=0,a.prototype.draw=function(){return this.canvas.beginPath(),this.canvas.fillStyle="#FFF",this.canvas.arc(this.x,this.y,this.r,0,2*Math.PI,!0),this.canvas.closePath(),this.canvas.fill()},a.prototype.rand=function(a,b){return null==a&&(a=0),null==b&&(b=1),(Math.random()*(b-a)+a)%b},a.prototype.move=function(){return this.x+=this.dx,this.y+=this.dy,this.x<this.w&&this.x>-10||(this.x=-5,this.dx=this.rand(-.8,.8)),this.y>this.h?(this.y=0,this.dy=this.rand(.1,.5)):void 0},a}(),h=function(a){function b(){return this.clear=t(this.clear,this),this.update=t(this.update,this),this.batchParticles=t(this.batchParticles,this),this.start=t(this.start,this),this.initialize=t(this.initialize,this),p=b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.ctx=null,b.prototype.canvas=null,b.prototype.particles=null,b.prototype.tagName="div",b.prototype.className="particles",b.prototype.initialize=function(){return this.canvas=document.createElement("canvas"),this.$el.append(this.canvas),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),this.start()},b.prototype.start=function(){return this.particles=[],this.batchParticles()},b.prototype.batchParticles=function(){var a,b,c,d;for(d=[],a=c=0;1e3>=c;a=++c)b=new g({_x:this.rand(0,this.canvas.width),_y:this.rand(0,-250),_r:this.rand(.2,2),_canvas:this.ctx,_w:this.canvas.width,_h:this.canvas.height,_dx:this.rand(-.3,.3),_dy:this.rand(.1,.5)}),d.push(this.particles.push(b));return d},b.prototype.rand=function(a,b){return null==a&&(a=0),null==b&&(b=1),(Math.random()*(b-a)+a)%b},b.prototype.update=function(){var a,b,c,d,e;for(this.clear(),d=this.particles,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.move(),e.push(a.draw());return e},b.prototype.clear=function(){return this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),null},b}(Backbone.View),i=function(a){function b(){return this.update=t(this.update,this),this.refresh=t(this.refresh,this),this.initialize=t(this.initialize,this),q=b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.particles=null,b.prototype.tagName="section",b.prototype.initialize=function(){var a;return a='<div class="container">',a+='<div class="content">',a+="<h1>Merry Christmas</h1>",a+='<button onclick="window.location.reload();">Watch Again?</button>',a+='<h3>by <a href="http://twitter.com/silviopaganini" target="_blank">@silviopaganini</a></h3>',a+="</div>",a+="</div>",this.$el.html(a),this.$el.attr("id","bye"),this.particles=new h,this.$el.prepend(this.particles.$el)},b.prototype.refresh=function(){},b.prototype.update=function(){return this.particles.update(),null},b}(Backbone.View),d=function(a){function b(){return this.animate=t(this.animate,this),this.onResize=t(this.onResize,this),this.onToggleShaders=t(this.onToggleShaders,this),this.randomizeParams=t(this.randomizeParams,this),this.startParams=t(this.startParams,this),this.onParamsChange=t(this.onParamsChange,this),this.initialize=t(this.initialize,this),r=b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.camera=null,b.prototype.scene=null,b.prototype.renderer=null,b.prototype.videoTexture=null,b.prototype.videoMaterial=null,b.prototype.composer=null,b.prototype.shaderTime=0,b.prototype.badTVParams=null,b.prototype.badTVPass=null,b.prototype.staticParams=null,b.prototype.staticPass=null,b.prototype.rgbParams=null,b.prototype.rgbPass=null,b.prototype.filmParams=null,b.prototype.filmPass=null,b.prototype.renderPass=null,b.prototype.copyPass=null,b.prototype.pnoise=null,b.prototype.globalParams=null,b.prototype.initialize=function(){var a,b;return this.$el.attr("id","grito"),this.camera=new THREE.PerspectiveCamera(55,1.5,20,3e3),this.camera.position.z=1e3,this.scene=new THREE.Scene,this.videoMaterial=new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture("/static/images/grito.jpg")}),b=new THREE.PlaneGeometry(1080,720,1,1),a=new THREE.Mesh(b,this.videoMaterial),this.scene.add(a),a.z=0,a.scale.x=a.scale.y=1.45,this.renderer=new THREE.WebGLRenderer,this.renderer.setSize($(window).innerWidth(),$(window).innerHeight()),this.$el.append(this.renderer.domElement),this.renderPass=new THREE.RenderPass(this.scene,this.camera),this.badTVPass=new THREE.ShaderPass(THREE.BadTVShader),this.rgbPass=new THREE.ShaderPass(THREE.RGBShiftShader),this.filmPass=new THREE.ShaderPass(THREE.FilmShader),this.staticPass=new THREE.ShaderPass(THREE.StaticShader),this.copyPass=new THREE.ShaderPass(THREE.CopyShader),this.startParams(),this.onToggleShaders(),this.onParamsChange(),this.onResize(),window.addEventListener("resize",this.onResize,!1),this.animate(),null},b.prototype.onParamsChange=function(){return this.badTVPass.uniforms.distortion.value=this.badTVParams.distortion,this.badTVPass.uniforms.distortion2.value=this.badTVParams.distortion2,this.badTVPass.uniforms.speed.value=this.badTVParams.speed,this.badTVPass.uniforms.rollSpeed.value=this.badTVParams.rollSpeed,this.staticPass.uniforms.amount.value=this.staticParams.amount,this.staticPass.uniforms.size.value=this.staticParams.size2,this.rgbPass.uniforms.angle.value=this.rgbParams.angle*Math.PI,this.rgbPass.uniforms.amount.value=this.rgbParams.amount,this.filmPass.uniforms.sCount.value=this.filmParams.count,this.filmPass.uniforms.sIntensity.value=this.filmParams.sIntensity,this.filmPass.uniforms.nIntensity.value=this.filmParams.nIntensity,null},b.prototype.startParams=function(){return this.filmPass.uniforms.grayscale.value=0,this.badTVParams={mute:!1,show:!0,distortion:3.060059035103768,distortion2:8.147361182980239,speed:.06159879360347986,rollSpeed:0},this.rgbParams={show:!0,amount:.014869250056799501,angle:1.114169194828719},this.staticParams={show:!0,amount:.006870601838454605,size2:4},this.filmParams={show:!0,count:800,sIntensity:.9,nIntensity:.4},null},b.prototype.randomizeParams=function(){this.badTVParams={mute:!1,show:!0,distortion:3.060059035103768,distortion2:8.147361182980239,speed:.06159879360347986,rollSpeed:0},this.rgbParams={show:!0,amount:.014869250056799501,angle:1.114169194828719},this.staticParams={show:!0,amount:.006870601838454605,size2:4},this.filmParams={show:!0,count:800,sIntensity:.9,nIntensity:.4},this.onParamsChange()},b.prototype.onToggleShaders=function(){return this.composer=new THREE.EffectComposer(this.renderer),this.composer.addPass(this.renderPass),this.filmParams.show&&this.composer.addPass(this.filmPass),this.badTVParams.show&&this.composer.addPass(this.badTVPass),this.rgbParams.show&&this.composer.addPass(this.rgbPass),this.staticParams.show&&this.composer.addPass(this.staticPass),this.composer.addPass(this.copyPass),this.copyPass.renderToScreen=!0,null},b.prototype.onResize=function(){return this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),null},b.prototype.animate=function(){return this.shaderTime+=.1,this.badTVPass.uniforms.time.value=this.shaderTime,this.filmPass.uniforms.time.value=this.shaderTime,this.staticPass.uniforms.time.value=this.shaderTime,this.composer.render(.1),requestAnimationFrame(this.animate),null},b}(Backbone.View),a=function(a){function b(){return this.animate=t(this.animate,this),this.onAudioLoaded=t(this.onAudioLoaded,this),this.initialize=t(this.initialize,this),s=b.__super__.constructor.apply(this,arguments)}return v(b,a),b.prototype.music=null,b.prototype.mou=null,b.prototype.grito=null,b.prototype.circles=null,b.prototype.bye=null,b.prototype.initialize=function(){return this.setElement($("body")),window.addStats(),this.bye=new i,this.music=new f,this.music.on("loaded",this.onAudioLoaded),this.mou=new e,this.circles=new c,this.$el.append(this.circles.$el),this.viz=new j,this.$el.append(this.viz.$el),null},b.prototype.onAudioLoaded=function(){return this.music.play(),this.animate(),null},b.prototype.animate=function(){var a,b;return a=this.music.update(),null!=(b=this.mou)&&b.update(a),a.time>11.5&&!this.circles.animatedIn&&this.circles.animateIn(),a.time>13.6&&a.time<62&&(this.viz.$el.css("display","block"),this.viz.update(a)),a.time>=47&&a.time<=52&&(this.viz.isGrito||this.viz.setupGrito(),this.viz.isGrito=!0),a.time>=52&&(this.viz.isGrito&&this.viz.setupViz(),this.viz.isGrito=!1),a.time>57&&(this.circles.animatedOut?this.bye.update():(this.circles.animateOut(),$("svg").remove(),this.$el.append(this.bye.$el),this.viz.$el.remove())),window.stats.update(),requestAnimationFrame(this.animate),null},b}(Backbone.View),k=window||document,k.xmas={}||k.xmas,k.xmas.appView=new a}).call(this);
//# sourceMappingURL=/js/main.map